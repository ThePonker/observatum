Text File Summary:
- First lines:
"""
UKSI Database Handler for Observatum

Provides interface to query the UK Species Inventory database (uksi.db)
for species searches, autocomplete, and taxonomy information.

Author: Observatum Development Team
Date: 22 November 2025
"""

import sqlite3
import logging
from pathlib import Path
from typing import List, Dict, Optional, Tuple

logger = logging.getLogger(__name__)


class UKSIHandler:
    """
    Handler for UKSI (UK Species Inventory) database operations.
    
    Provides methods to search for species by scientific name, common name,
    or partial matches, and retrieve full taxonomic information.
    """
    
    def __init__(self, db_path: Path):
        """
        Initialize UKSI handler.
        

- Last lines:
                print(f"     Family: {species['family']}")
        
        # Test 2: Search for "Turdus"
        print("\n2. Searching for 'Turdus':")
        results = uksi.search_species("Turdus", limit=5)
        for species in results:
            print(f"   - {uksi.format_species_display(species)}")
        
        # Test 3: Get details for specific TVK
        if results:
            tvk = results[0]['tvk']
            print(f"\n3. Getting details for TVK {tvk}:")
            details = uksi.get_species_by_tvk(tvk)
            if details:
                print(f"   Scientific name: {details['scientific_name']}")
                print(f"   Common names: {details['common_names']}")
                print(f"   Taxonomy: {uksi.get_taxonomy_path(tvk)}")
                
                synonyms = uksi.get_synonyms(tvk)
                if synonyms:
                    print(f"   Synonyms: {', '.join(synonyms[:3])}")
        
        # Test 4: Search for "oak"
        print("\n4. Searching for 'oak':")
        results = uksi.search_species("oak", limit=5)
        for species in results:
            print(f"   - {uksi.format_species_display(species)}")
    
    print("\n" + "="*70)
    print("Test complete!")
